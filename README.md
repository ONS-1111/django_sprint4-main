# Блогикум — Спринт 4

Учебный Django‑проект: блог с категориями, профилями пользователей и системой комментариев. Поддерживает отложенные публикации, пагинацию, редактирование/удаление материалов, кастомные страницы ошибок и файловый e‑mail бэкенд.

## Возможности
- Публикации: текст, заголовок, категория, местоположение, картинка, дата публикации (включая отложенные).
- Категории и местоположения (создаются администратором через админ‑панель).
- Профиль автора: список публикаций, ссылки на редактирование профиля и смену пароля (только владельцу).
- Комментарии: создание, редактирование, удаление; сортировка «от старых к новым»; счётчик комментариев на списках постов.
- Пагинация: по 10 постов на главной, в профиле и на странице категории.
- Кастомные страницы ошибок: 403 CSRF, 404, 500.
- E‑mail: файловый бэкенд (письма сохраняются в `sent_emails/`).

## Требования
- Python 3.9+
- Django 3.2
- Зависимости из `requirements.txt`

## Установка и запуск
```bash
git clone <repo_url>
cd django_sprint4-main

# Виртуальное окружение
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# Миграции и запуск
cd blogicum
python manage.py migrate
python manage.py runserver
```

### Инициализация данных (необязательно)
```bash
python manage.py loaddata ../db.json
```

## Основные маршруты
- `/` — главная страница.
- `/profile/<username>/` — профиль пользователя.
- `/category/<category_slug>/` — страница категории.
- `/posts/create/` — создание поста.
- `/posts/<post_id>/edit/` — редактирование поста.
- `/posts/<post_id>/delete/` — удаление поста.
- `/posts/<post_id>/comment/` — добавить комментарий.
- `/posts/<post_id>/edit_comment/<comment_id>/` — редактировать комментарий.
- `/posts/<post_id>/delete_comment/<comment_id>/` — удалить комментарий.
- `/auth/...` — маршруты Django Auth (вход/выход, смена/сброс пароля и т.д.).
- `/auth/registration/` — регистрация пользователя.
- `/pages/about/`, `/pages/rules/`, `/pages/contacts/`, `/pages/help/` — статичные страницы (CBV).

## Права доступа (кратко)
- Создавать посты/комментарии — только аутентифицированные пользователи.
- Редактировать/удалять пост или комментарий — только автор.
- Отложенные и снятые с публикации посты видит только автор на своей странице.

## Медиа и почта
- Картинки загружаются в `media/img/`, отдаются по `MEDIA_URL`.
- Отправка почты — файловый бэкенд: письма сохраняются в `sent_emails/` (папка исключена из Git в `.gitignore`).

## Тесты
```bash
pytest -q
```

## Автор
- Оспищев Никита Сергеевич
- Email: Kanalohca@gmail.com
